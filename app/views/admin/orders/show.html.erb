<div class="container">
   <div class="row">
   <div class style="padding: 50px;">
      <h3 class="border bg-light">
        <div class="mx-3">注文履歴詳細</h3></div>

   </div>
   </div>
 </div>

 <div class="container">
   <div class="row">

<table class="table">
  <thead>
    <tr>
      <th>購入者</th>
      <td><%= @order.name %></td>
    </tr>
    <tr>
     <th>注文日</th>
     <td><%= @order.created_at.to_s(:datetime_jp) %></td>
    </tr>
    <tr>
      <th>配送先</th>
      <td><%= @order.address %></td>
    </tr>
    <tr>
      <th>支払方法</th>
      <td><%= @order.payment_method_i18n %></td>
    </tr>
    <tr>
      <th>注文ステータス</th>
      <td>
       <%= form_with model: [:admin, @order],local: true do |f| %>
       <%= select :order,:status,Order.statuses.keys.to_a.map {|k| [I18n.t("enums.order.status.#{k}"), k]} %>
       <%= f.hidden_field :status, :value => @order.status %>
       <%#= select :status,:name,Order.statuses.values.to_a %></td>

       <td><%= f.submit "更新する",class: "btn btn-success" %>
       <% end %>
      </td>
    </tr>
  </thead>
</table>

<div class ="col-md-8">
<table>
     <% @order_details.each do |order_details| %>
　<tr>
    <th>商品名</th>
    <th></th>
    <th>単価（税込）</th>
    <th></th>
    <th>数量</th>
    <th></th>
    <th>小計</th>
    <th></th>
    <th>製作ステータス</th>
    <th></th>
   </tr>
  <tr>
    <td><%= order_details.item.name %></td>
    <td></td>
    <td><%= order_details.price %></td>
    <td></td>
    <td><%= order_details.amount %></td>
    <td></td>
    <td><%= order_details.subtotal %></td>
    <% end %>
    <td></td>

    <td>
      <%= form_with model: @order_detail, local: true do |f| %>
      <%= select :status,:name,OrderDetail.making_statuses.keys.to_a.map {|k| [I18n.t("enums.order_detail.making_status.#{k}"), k]} %>
      <%#= f.hidden_field :status, :value => @order_detail.making_status %>
     </td>
     <td>
      <%= f.submit "更新する",class: "btn btn-success" %>
      <% end %>
    </td>
  </tr>
</table>
</div>

<div class ="col-md-4">
    <table>
        <tr>
        <th>商品合計</th>
        <td><%# @total_price.price %>円</td>
        </tr>
        <tr>
        <th>送料</th>
        <td>800</td>
        </tr>
        <tr>
            <th>請求合計金額</th>
            <td><%# @total_price.price + 800 %>円</td>
        </tr>
    </table>

</div>


